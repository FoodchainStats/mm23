<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en"><head><meta http-equiv="Content-Type" content="text/html; charset=UTF-8"><meta charset="utf-8"><meta http-equiv="X-UA-Compatible" content="IE=edge"><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><meta name="description" content="The contribution function implements the formula for calculating the
contribution of a cpi component to its parent level, as set out in the ONS
CPI Technical Manual.
The function must be applied to an unchained index. The unchain() function
can be used to unchain a series. The formula is valid for data after 2018
when the CPI weights updated twice a year, and is set out below.
\(c = component\ c\)
\(a =\ 'all\ items'\ CPI\ index\)
\(W^c_{y} = weight\ of\ component\ c\ in\ year\ y\)
\(I^c_t = index\ for\ component\ c\ in\ month\ t\ based\ on\ January\ of\ current\ year =100\)
\(I^a_{Jan} = all\ items\ index\ for\ January\ based\ on\ previous\ month\ (December) = 100\)
\(I^a_{Dec} = all\ items\ index\ for\ December\ based\ on\ previous\ January = 100\)
$$
(\frac{W^c_{y-1}} {W^a_{y-1}})
\times
(\frac{({I^c_{Dec}} - {I^c_{t-12}})}{I^a_{t-12}})
\times
100
\ \ +\ \
(\frac{W^c_y}{W^a_y})
\times
(\frac{({I^c_{Jan}}-100)}{I^a_{t-12}})
\times
I^a_{Dec}
\ \ +\ \
(\frac{W^c_y}{W^a_y})
\times
(\frac{(I^c_t - 100)}{I^a_{t-12}})
\times
\frac{I^a_{Jan}}{100}
\times
I^a_{Dec}
$$
You should apply contribution() to a wide dataframe: one that has a field
containing the dates for the series, and columns containing the relevant
series indices and their weights."><title>Calculate contribution of a series to 'all items' 12 month rate — contribution • mm23</title><script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no"><link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet"><script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous"><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous"><!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Calculate contribution of a series to 'all items' 12 month rate — contribution"><meta property="og:description" content="The contribution function implements the formula for calculating the
contribution of a cpi component to its parent level, as set out in the ONS
CPI Technical Manual.
The function must be applied to an unchained index. The unchain() function
can be used to unchain a series. The formula is valid for data after 2018
when the CPI weights updated twice a year, and is set out below.
\(c = component\ c\)
\(a =\ 'all\ items'\ CPI\ index\)
\(W^c_{y} = weight\ of\ component\ c\ in\ year\ y\)
\(I^c_t = index\ for\ component\ c\ in\ month\ t\ based\ on\ January\ of\ current\ year =100\)
\(I^a_{Jan} = all\ items\ index\ for\ January\ based\ on\ previous\ month\ (December) = 100\)
\(I^a_{Dec} = all\ items\ index\ for\ December\ based\ on\ previous\ January = 100\)
$$
(\frac{W^c_{y-1}} {W^a_{y-1}})
\times
(\frac{({I^c_{Dec}} - {I^c_{t-12}})}{I^a_{t-12}})
\times
100
\ \ +\ \
(\frac{W^c_y}{W^a_y})
\times
(\frac{({I^c_{Jan}}-100)}{I^a_{t-12}})
\times
I^a_{Dec}
\ \ +\ \
(\frac{W^c_y}{W^a_y})
\times
(\frac{(I^c_t - 100)}{I^a_{t-12}})
\times
\frac{I^a_{Jan}}{100}
\times
I^a_{Dec}
$$
You should apply contribution() to a wide dataframe: one that has a field
containing the dates for the series, and columns containing the relevant
series indices and their weights."><!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]--></head><body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mm23</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto"><li class="active nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
      </ul><form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off"></form>

      <ul class="navbar-nav"></ul></div>

    
  </div>
</nav><div class="container template-reference-topic">
<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Calculate contribution of a series to 'all items' 12 month rate</h1>
      
      <div class="d-none name"><code>contribution.Rd</code></div>
    </div>

    <div class="ref-description section level2">
    <p>The contribution function implements the formula for calculating the
contribution of a cpi component to its parent level, as set out in the ONS
<a href="https://www.ons.gov.uk/economy/inflationandpriceindices/methodologies/consumerpricesindicestechnicalmanual2019#weights" class="external-link">CPI Technical Manual</a>.</p>
<p>The function must be applied to an unchained index. The <code><a href="unchain.html">unchain()</a></code> function
can be used to unchain a series. The formula is valid for data after 2018
when the CPI weights updated twice a year, and is set out below.</p>
<p>\(c = component\ c\)
\(a =\ 'all\ items'\ CPI\ index\)
\(W^c_{y} = weight\ of\ component\ c\ in\ year\ y\)
\(I^c_t = index\ for\ component\ c\ in\ month\ t\ based\ on\ January\ of\ current\ year =100\)
\(I^a_{Jan} = all\ items\ index\ for\ January\ based\ on\ previous\ month\ (December) = 100\)
\(I^a_{Dec} = all\ items\ index\ for\ December\ based\ on\ previous\ January = 100\)</p>
<p>$$
(\frac{W^c_{y-1}} {W^a_{y-1}})
\times
(\frac{({I^c_{Dec}} - {I^c_{t-12}})}{I^a_{t-12}})
\times
100
\ \ +\ \
(\frac{W^c_y}{W^a_y})
\times
(\frac{({I^c_{Jan}}-100)}{I^a_{t-12}})
\times
I^a_{Dec}
\ \ +\ \
(\frac{W^c_y}{W^a_y})
\times
(\frac{(I^c_t - 100)}{I^a_{t-12}})
\times
\frac{I^a_{Jan}}{100}
\times
I^a_{Dec}
$$</p>
<p>You should apply <code>contribution()</code> to a wide dataframe: one that has a field
containing the dates for the series, and columns containing the relevant
series indices and their weights.</p>
    </div>

    <div class="section level2">
    <h2 id="ref-usage">Usage<a class="anchor" aria-label="anchor" href="#ref-usage"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span><span class="fu">contribution</span><span class="op">(</span></span>
<span>  <span class="va">month</span>,</span>
<span>  <span class="va">all_items_index</span>,</span>
<span>  <span class="va">all_items_weight</span>,</span>
<span>  <span class="va">component_index</span>,</span>
<span>  <span class="va">component_weight</span></span>
<span><span class="op">)</span></span></code></pre></div>
    </div>

    <div class="section level2">
    <h2 id="arguments">Arguments<a class="anchor" aria-label="anchor" href="#arguments"></a></h2>
    <dl><dt>month</dt>
<dd><p>A month number</p></dd>


<dt>all_items_index</dt>
<dd><p>All items (or category) index</p></dd>


<dt>all_items_weight</dt>
<dd><p>All items (or category) weight</p></dd>


<dt>component_index</dt>
<dd><p>Component item index</p></dd>


<dt>component_weight</dt>
<dd><p>Component item weight</p></dd>

</dl></div>
    <div class="section level2">
    <h2 id="value">Value<a class="anchor" aria-label="anchor" href="#value"></a></h2>
    

<p>A contribution value</p>
    </div>

    <div class="section level2">
    <h2 id="ref-examples">Examples<a class="anchor" aria-label="anchor" href="#ref-examples"></a></h2>
    <div class="sourceCode"><pre class="sourceCode r"><code><span class="r-in"><span><span class="kw">if</span> <span class="op">(</span><span class="cn">FALSE</span><span class="op">)</span> <span class="op">{</span></span></span>
<span class="r-in"><span><span class="va">bread</span> <span class="op">=</span> <span class="fu">contribution</span><span class="op">(</span>month <span class="op">=</span> <span class="fu"><a href="https://lubridate.tidyverse.org/reference/month.html" class="external-link">month</a></span><span class="op">(</span><span class="va">date</span><span class="op">)</span>,</span></span>
<span class="r-in"><span>  all_items_index <span class="op">=</span> <span class="va">L523</span>,</span></span>
<span class="r-in"><span>  all_items_weight <span class="op">=</span> <span class="va">L5CZ</span>,</span></span>
<span class="r-in"><span>  component_index <span class="op">=</span> <span class="va">L52I</span>,</span></span>
<span class="r-in"><span>  component_weight <span class="op">=</span> <span class="va">L5DH</span><span class="op">)</span></span></span>
<span class="r-in"><span><span class="op">}</span></span></span>
</code></pre></div>
    </div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside></div>


    <footer><div class="pkgdown-footer-left">
  <p></p><p>Developed by David Lee.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p><p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer></div>

  

  

  </body></html>

