<!DOCTYPE html>
<!-- Generated by pkgdown: do not edit by hand --><html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta http-equiv="X-UA-Compatible" content="IE=edge">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<meta name="description" content="mm23">
<title>Getting started with mm23 â€¢ mm23</title>
<script src="../deps/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="../deps/bootstrap-5.2.2/bootstrap.min.css" rel="stylesheet">
<script src="../deps/bootstrap-5.2.2/bootstrap.bundle.min.js"></script><!-- Font Awesome icons --><link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/all.min.css" integrity="sha256-mmgLkCYLUQbXn0B1SRqzHar6dCnv9oZFPEC1g1cwlkk=" crossorigin="anonymous">
<link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.12.1/css/v4-shims.min.css" integrity="sha256-wZjR52fzng1pJHwx4aV2AO3yyTOXrcDW7jBpJtTwVxw=" crossorigin="anonymous">
<!-- bootstrap-toc --><script src="https://cdn.jsdelivr.net/gh/afeld/bootstrap-toc@v1.0.1/dist/bootstrap-toc.min.js" integrity="sha256-4veVQbu7//Lk5TSmc7YV48MxtMy98e26cf5MrgZYnwo=" crossorigin="anonymous"></script><!-- headroom.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/headroom.min.js" integrity="sha256-AsUX4SJE1+yuDu5+mAVzJbuYNPHj/WroHuZ8Ir/CkE0=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/headroom/0.11.0/jQuery.headroom.min.js" integrity="sha256-ZX/yNShbjqsohH1k95liqY9Gd8uOiE1S4vZc+9KQ1K4=" crossorigin="anonymous"></script><!-- clipboard.js --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><!-- search --><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- pkgdown --><script src="../pkgdown.js"></script><meta property="og:title" content="Getting started with mm23">
<meta property="og:description" content="mm23">
<!-- mathjax --><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/MathJax.js" integrity="sha256-nvJJv9wWKEm88qvoQl9ekL2J+k/RWIsaSScxxlsrv8k=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.5/config/TeX-AMS-MML_HTMLorMML.js" integrity="sha256-84DKXVJXs0/F8OTMzX4UR909+jtl4G7SPypPavF+GfA=" crossorigin="anonymous"></script><!--[if lt IE 9]>
<script src="https://oss.maxcdn.com/html5shiv/3.7.3/html5shiv.min.js"></script>
<script src="https://oss.maxcdn.com/respond/1.4.2/respond.min.js"></script>
<![endif]-->
</head>
<body>
    <a href="#main" class="visually-hidden-focusable">Skip to contents</a>
    

    <nav class="navbar fixed-top navbar-light navbar-expand-lg bg-light"><div class="container">
    
    <a class="navbar-brand me-2" href="../index.html">mm23</a>

    <small class="nav-text text-muted me-auto" data-bs-toggle="tooltip" data-bs-placement="bottom" title="">0.0.0.9000</small>

    
    <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbar" aria-controls="navbar" aria-expanded="false" aria-label="Toggle navigation">
      <span class="navbar-toggler-icon"></span>
    </button>

    <div id="navbar" class="collapse navbar-collapse ms-3">
      <ul class="navbar-nav me-auto">
<li class="active nav-item">
  <a class="nav-link" href="../articles/mm23.html">Get started</a>
</li>
<li class="nav-item">
  <a class="nav-link" href="../reference/index.html">Reference</a>
</li>
<li class="nav-item dropdown">
  <a href="#" class="nav-link dropdown-toggle" data-bs-toggle="dropdown" role="button" aria-expanded="false" aria-haspopup="true" id="dropdown-articles">Articles</a>
  <div class="dropdown-menu" aria-labelledby="dropdown-articles">
    <a class="dropdown-item" href="../articles/contribution.html">Calculating contribution to annual rate</a>
    <a class="dropdown-item" href="../articles/prices.html">ONS Shopping Price Tool data</a>
  </div>
</li>
      </ul>
<form class="form-inline my-2 my-lg-0" role="search">
        <input type="search" class="form-control me-sm-2" aria-label="Toggle navigation" name="search-input" data-search-index="../search.json" id="search-input" placeholder="Search for" autocomplete="off">
</form>

      <ul class="navbar-nav"></ul>
</div>

    
  </div>
</nav><div class="container template-article">




<div class="row">
  <main id="main" class="col-md-9"><div class="page-header">
      <img src="" class="logo" alt=""><h1>Getting started with mm23</h1>
            
      
      
      <div class="d-none name"><code>mm23.Rmd</code></div>
    </div>

    
    
<div class="section level2">
<h2 id="get-mm23-data">Get MM23 data<a class="anchor" aria-label="anchor" href="#get-mm23-data"></a>
</h2>
<p>Download the latest MM23 from ONS. <code><a href="../reference/acquire_mm23.html">acquire_mm23()</a></code> simply
downloads the full latest <code>mm23.csv</code> file, and returns its
location. By default it puts it into a temporary file, but you can
specify where you want to put it.</p>
<div class="sourceCode" id="cb1"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="kw"><a href="https://rdrr.io/r/base/library.html" class="external-link">library</a></span><span class="op">(</span><span class="va"><a href="https://foodchainstats.github.io/mm23/">mm23</a></span><span class="op">)</span></span>
<span></span>
<span><span class="co"># Puts the data in a temporary file and returns its name</span></span>
<span><span class="va">mm23</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acquire_mm23.html">acquire_mm23</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">mm23</span></span>
<span><span class="co">#&gt; [1] "/tmp/RtmpFEdFdp/file17639158dcc"</span></span>
<span></span>
<span><span class="co"># Or specify a location</span></span>
<span><span class="co"># mm23 &lt;- acquire_mm23("~/data")</span></span>
<span><span class="co"># data &lt;- read.csv("~/data/mm23.csv")</span></span></code></pre></div>
<p>However, the raw <code>mm23.csv</code> file is not very
user-friendly. The key metadata is in the first few rows. Yearly,
quarterly and monthly series values are included in the csv file in the
same column. Its hard to unpick the data. There are thousands of series
all included in a single csv file.</p>
<p>Which is mainly where <code>mm23</code> comes in.</p>
</div>
<div class="section level2">
<h2 id="wrangling-mm23-with-mm23">Wrangling MM23 with <code>mm23</code><a class="anchor" aria-label="anchor" href="#wrangling-mm23-with-mm23"></a>
</h2>
<div class="section level3">
<h3 id="data">Data<a class="anchor" aria-label="anchor" href="#data"></a>
</h3>
<p>The <code>get_mm23_*</code> functions will return data in a tidy
format. Each series has a unique <code>CDID</code> identifier.</p>
<table class="table">
<thead><tr class="header">
<th align="left">date</th>
<th align="left">cdid</th>
<th align="right">value</th>
<th align="left">period</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1947-06-01</td>
<td align="left">CDKO</td>
<td align="right">28.9</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">1947-07-01</td>
<td align="left">CDKO</td>
<td align="right">29.1</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="left">1947-07-01</td>
<td align="left">CDKP</td>
<td align="right">1.2</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">1947-07-01</td>
<td align="left">CZEQ</td>
<td align="right">0.7</td>
<td align="left">M</td>
</tr>
<tr class="odd">
<td align="left">1947-07-01</td>
<td align="left">CZFB</td>
<td align="right">0.8</td>
<td align="left">M</td>
</tr>
<tr class="even">
<td align="left">1947-07-01</td>
<td align="left">CZFG</td>
<td align="right">0.0</td>
<td align="left">M</td>
</tr>
</tbody>
</table>
<p>Its more efficient to use <code>acquire_mm23</code> first so as to
only download the data once. But if used without parameters the
<code>get_mm23_*</code> functions will download the latest data.</p>
<div class="sourceCode" id="cb2"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span><span class="va">mm23</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/acquire_mm23.html">acquire_mm23</a></span><span class="op">(</span><span class="op">)</span></span>
<span><span class="va">m</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_mm23_month.html">get_mm23_month</a></span><span class="op">(</span><span class="va">mm23</span><span class="op">)</span></span>
<span><span class="va">q</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_mm23_quarter.html">get_mm23_quarter</a></span><span class="op">(</span><span class="va">mm23</span><span class="op">)</span></span>
<span><span class="va">y</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_mm23_year.html">get_mm23_year</a></span><span class="op">(</span><span class="va">mm23</span><span class="op">)</span></span></code></pre></div>
</div>
<div class="section level3">
<h3 id="metadata">Metadata<a class="anchor" aria-label="anchor" href="#metadata"></a>
</h3>
<p>Use <code><a href="../reference/get_mm23_metadata.html">get_mm23_metadata()</a></code> to return details of what each
series CDID represents. Below is a random sample of its output. For some
series <code><a href="../reference/get_mm23_metadata.html">get_mm23_metadata()</a></code> extracts the category of data
included and puts it in the <code>category</code> field. Equally, it
infers the COICOP digit level and adds that to the <code>level</code>
field.</p>
<div class="sourceCode" id="cb3"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="fu">mm23</span><span class="fu">::</span><span class="fu"><a href="../reference/get_mm23_metadata.html">get_mm23_metadata</a></span><span class="op">(</span><span class="va">mm23</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/slice.html" class="external-link">slice_sample</a></span><span class="op">(</span>n <span class="op">=</span> <span class="fl">5</span><span class="op">)</span> <span class="op">|&gt;</span> <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table style="width:100%;" class="table">
<colgroup>
<col width="2%">
<col width="43%">
<col width="12%">
<col width="3%">
<col width="5%">
<col width="8%">
<col width="7%">
<col width="7%">
<col width="9%">
</colgroup>
<thead><tr class="header">
<th align="left">cdid</th>
<th align="left">title</th>
<th align="left">category</th>
<th align="right">level</th>
<th align="left">pre_unit</th>
<th align="left">unit</th>
<th align="left">release_date</th>
<th align="left">next_release</th>
<th align="left">important_notes</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">L5DF</td>
<td align="left">CPIH Weights: Excluding Energy, food, alcoholic
beverages &amp; tobacco 2015=100</td>
<td align="left">NA</td>
<td align="right">NA</td>
<td align="left">NA</td>
<td align="left">Parts per 1000</td>
<td align="left">24-05-2023</td>
<td align="left">21 June 2023</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">L58X</td>
<td align="left">12.1.1 : Hairdressing And Personal Grooming
Establishments</td>
<td align="left">CPIH Annual rate (%)</td>
<td align="right">3</td>
<td align="left">NA</td>
<td align="left">%</td>
<td align="left">24-05-2023</td>
<td align="left">21 June 2023</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">L8BQ</td>
<td align="left">07.2.4.3 Driving Lessons, Test Licences And Road
Worthiness Tests</td>
<td align="left">CPI Weights</td>
<td align="right">4</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">24-05-2023</td>
<td align="left">21 June 2023</td>
<td align="left">NA</td>
</tr>
<tr class="even">
<td align="left">D7MN</td>
<td align="left">09.3.4 : Pets And Related Products</td>
<td align="left">CPI Monthly rate (%)</td>
<td align="right">3</td>
<td align="left">NA</td>
<td align="left">%</td>
<td align="left">24-05-2023</td>
<td align="left">21 June 2023</td>
<td align="left">NA</td>
</tr>
<tr class="odd">
<td align="left">J3OW</td>
<td align="left">01.1.4.1 Whole Milk</td>
<td align="left">CPIH Monthly rate (%)</td>
<td align="right">4</td>
<td align="left">NA</td>
<td align="left">NA</td>
<td align="left">24-05-2023</td>
<td align="left">21 June 2023</td>
<td align="left">NA</td>
</tr>
</tbody>
</table>
<p>You can join data and metadata by CDID, for analysis.</p>
<div class="sourceCode" id="cb4"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span><span class="va">data</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_mm23_month.html">get_mm23_month</a></span><span class="op">(</span><span class="va">mm23</span><span class="op">)</span></span>
<span><span class="va">metadata</span> <span class="op">&lt;-</span> <span class="fu"><a href="../reference/get_mm23_metadata.html">get_mm23_metadata</a></span><span class="op">(</span><span class="va">mm23</span><span class="op">)</span></span>
<span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cdid</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"L55O"</span>, <span class="st">"L55P"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">cdid</span>, <span class="va">value</span>, <span class="va">title</span>, <span class="va">category</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu"><a href="https://rdrr.io/r/utils/head.html" class="external-link">head</a></span><span class="op">(</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">knitr</span><span class="fu">::</span><span class="fu"><a href="https://rdrr.io/pkg/knitr/man/kable.html" class="external-link">kable</a></span><span class="op">(</span><span class="op">)</span></span></code></pre></div>
<table class="table">
<colgroup>
<col width="13%">
<col width="6%">
<col width="7%">
<col width="46%">
<col width="25%">
</colgroup>
<thead><tr class="header">
<th align="left">date</th>
<th align="left">cdid</th>
<th align="right">value</th>
<th align="left">title</th>
<th align="left">category</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left">1989-01-01</td>
<td align="left">L55O</td>
<td align="right">5.7</td>
<td align="left">00: All Items</td>
<td align="left">CPIH Annual rate (%)</td>
</tr>
<tr class="even">
<td align="left">1989-01-01</td>
<td align="left">L55P</td>
<td align="right">4.3</td>
<td align="left">01 : Food And Non-Alcoholic Beverages</td>
<td align="left">CPIH Annual rate (%)</td>
</tr>
<tr class="odd">
<td align="left">1989-02-01</td>
<td align="left">L55O</td>
<td align="right">5.8</td>
<td align="left">00: All Items</td>
<td align="left">CPIH Annual rate (%)</td>
</tr>
<tr class="even">
<td align="left">1989-02-01</td>
<td align="left">L55P</td>
<td align="right">4.0</td>
<td align="left">01 : Food And Non-Alcoholic Beverages</td>
<td align="left">CPIH Annual rate (%)</td>
</tr>
<tr class="odd">
<td align="left">1989-03-01</td>
<td align="left">L55O</td>
<td align="right">5.9</td>
<td align="left">00: All Items</td>
<td align="left">CPIH Annual rate (%)</td>
</tr>
<tr class="even">
<td align="left">1989-03-01</td>
<td align="left">L55P</td>
<td align="right">4.2</td>
<td align="left">01 : Food And Non-Alcoholic Beverages</td>
<td align="left">CPIH Annual rate (%)</td>
</tr>
</tbody>
</table>
<div class="sourceCode" id="cb5"><pre class="downlit sourceCode r">
<code class="sourceCode R"><span></span>
<span></span>
<span><span class="va">data</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/filter.html" class="external-link">filter</a></span><span class="op">(</span><span class="va">cdid</span> <span class="op"><a href="https://rdrr.io/r/base/match.html" class="external-link">%in%</a></span> <span class="fu"><a href="https://rdrr.io/r/base/c.html" class="external-link">c</a></span><span class="op">(</span><span class="st">"L55O"</span>, <span class="st">"L55P"</span><span class="op">)</span><span class="op">)</span> <span class="op">|&gt;</span></span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/mutate-joins.html" class="external-link">left_join</a></span><span class="op">(</span><span class="va">metadata</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">dplyr</span><span class="fu">::</span><span class="fu"><a href="https://dplyr.tidyverse.org/reference/select.html" class="external-link">select</a></span><span class="op">(</span><span class="va">date</span>, <span class="va">cdid</span>, <span class="va">value</span>, <span class="va">title</span>, <span class="va">category</span><span class="op">)</span> <span class="op">|&gt;</span> </span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/ggplot.html" class="external-link">ggplot</a></span><span class="op">(</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/geom_path.html" class="external-link">geom_line</a></span><span class="op">(</span><span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/aes.html" class="external-link">aes</a></span><span class="op">(</span>x <span class="op">=</span> <span class="va">date</span>, y <span class="op">=</span> <span class="va">value</span>, colour <span class="op">=</span> <span class="va">title</span><span class="op">)</span><span class="op">)</span> <span class="op">+</span></span>
<span>  <span class="fu">ggplot2</span><span class="fu">::</span><span class="fu"><a href="https://ggplot2.tidyverse.org/reference/theme.html" class="external-link">theme</a></span><span class="op">(</span>legend.position <span class="op">=</span> <span class="st">"bottom"</span><span class="op">)</span></span></code></pre></div>
<p><img src="mm23_files/figure-html/unnamed-chunk-5-1.png" width="700"></p>
</div>
</div>
  </main><aside class="col-md-3"><nav id="toc"><h2>On this page</h2>
    </nav></aside>
</div>



    <footer><div class="pkgdown-footer-left">
  <p></p>
<p>Developed by David Lee.</p>
</div>

<div class="pkgdown-footer-right">
  <p></p>
<p>Site built with <a href="https://pkgdown.r-lib.org/" class="external-link">pkgdown</a> 2.0.7.</p>
</div>

    </footer>
</div>

  

  

  </body>
</html>
